<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="aha.sitecontent">
<body>

<metal:main fill-slot="main">
  <metal:content-core define-macro="main">

    <tal:block tal:condition="not:view/display_cards">
    <div class="app-page-content" id="app-page-content"
            tal:attributes="class view/computed_klass"
            tal:condition="not:view/display_gallery">
        <div class="app-page-header">
          <div class="app-page-title">
              <h1 class="app-page-headline" tal:content="context/Title">
                ${context/Title}
              </h1>
          </div>
          <p class="app-page-abstract" tal:condition="context/Description">
              ${context/Description}
          </p>
        </div>

        <div class="app-page-body">
            <div class="app-page-text" id="parent-fieldname-text"
              tal:condition="context/text"
              tal:content="structure context/text/output" />
        </div>
        <tal:thumbs tal:condition="view/display_thumbnails">
            <div tal:replace="structure view/rendered_thumbnails" />
        </tal:thumbs>
    </div>
    <div class="app-page-gallery" id="app-page-gallery"
      tal:condition="view/display_gallery">
        <div tal:replace="structure view/rendered_gallery" />
    </div>
    </tal:block>

    <tal:cards tal:condition="view/display_cards">
      <div class="app-page-cards" tal:condition="view/has_subitems">
        <tal:row tal:repeat="row view/content_matrix">
          <div class="app-page-section"
            tal:define="evenrow repeat/row/even"
            tal:attributes="class python:evenrow and 'app-page-section app-page-section-inverse' or 'app-page-section'">
            <tal:col tal:repeat="col row">
              <div class="app-page-col"
                tal:define="evenrow repeat/col/even;
                            item col/item"
                tal:attributes="class python:evenrow and 'app-page-col app-page-col-main' or 'app-page-col app-page-col-aside'">
                <div class="ratio-container"
                  tal:define="image_data python:view.image_tag(item)">
                    <a class="app-project-panel" href="${item/getURL}">
                        <img class="slazyload"
                              src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                              data-sizes="auto"
                              data-srcset="${image_data/small},
                                           ${image_data/medium},
                                           ${image_data/large}" />
                    </a>
                </div>
                <p><a class="app-project-panel" href="${item/getURL}">${item/Title}</a></p>
              </div>
            </tal:col>
          </div>
        </tal:row>
      </div>
    </tal:cards>

  </metal:content-core>
</metal:main>

</body>
</html>
