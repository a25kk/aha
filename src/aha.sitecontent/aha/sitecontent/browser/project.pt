<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="aha.sitecontent">
<body>

<metal:main fill-slot="main">
  <metal:content-core define-macro="main">

    <div class="app-project">
        <div class="app-page-header" tal:condition="view/can_edit">
          <div class="app-page-block app-page-toolbar"
            tal:define="context_state context/@@plone_context_state;
                        parent context_state/parent">
          </div>
        </div>
        <div class="app-page-header">
            <h1 class="app-page-title">
                <span tal:replace="context/Title" />
            </h1>
        </div>
        <p class="app-page-abstract"
            tal:condition="context/Description"
            tal:content="context/Description" />
        <div class="app-page-content app-project-content">
            <div class="app-page-gallery"
              tal:define="contained_images python:context.restrictedTraverse('@@folderListing')(portal_type='Image')">
              <div class="app-panel app-panel-lg"
                tal:condition="not:view/has_assets">
                  <div class="no-data-sign">
                    <i class="ion ion-ios7-more app-icon-lg"></i>
                  </div>
              <div class="app-gallery" tal:condition="view/has_assets">
                  <div class="project-gallery main-gallery" tal:define="items view/image_list">
                    <div class="app-gallery-cell project-gallery-item item" tal:repeat="item items">
                      <tal:item tal:define="img python:view.image_tag(item)">
                        <img class="lazyload" src="${img/url}"
                          width="${img/width}" width="${img/height}"
                          alt="" />
                      </tal:item>
                    </div>
                  </div>
              </div>
            </div>
        </div>

        <div class="app-page-content app-project-content"
          tal:define="has_references context/reference">
          <div class="app-page-block">
            <div class="app-page-block-content app-page-block-main"
              tal:attributes="class python:has_references and 'app-page-block-content app-page-block-main' or 'app-page-block-content'">
              <div class="app-page-text"
                tal:condition="context/text"
                tal:content="structure context/text/output" />
            </div>
          </div>
        </div>
        
        <div class="app-page-block-content app-page-block-aside" tal:condition="context/reference">
          <div class="app-card">
            <div class="app-card-header">
              <div class="app-card-title">Referenzen</div>
            </div>
            <div class="app-card-content">
              <ul class="app-project-list">
                <li class="app-project-list-item" tal:repeat="item context/reference">
                  <span tal:replace="item" />
                </li>
              </ul>
            </div>
          </div>
        </div>
    </div>
  </metal:content-core>
</metal:main>
</body>
</html>